(()=>{var A=class{constructor(t){this.t=t,this.i=10**this.t}h(t){return this.t<16?Math.round(t*this.i)/this.i:t}o(t,e){return this.h(t)+","+this.h(e)}},E=class{constructor(t,e){this.x=t,this.y=e}u(){return new E(-this.x,-this.y)}l(t=1){return this._(t/(this.M()||1/0))}g(t){return new E(this.x+t.x,this.y+t.y)}v(t){return new E(this.x-t.x,this.y-t.y)}_(t){return new E(this.x*t,this.y*t)}m(t){return this.x*t.x+this.y*t.y}M(){return Math.sqrt(this.x*this.x+this.y*this.y)}p(t){let e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},k=class{constructor(t,e){this.C=t,this.L=e}},_=class{constructor(t,e){this.k=t,this.B=e}D(t){let e=this.k;this.B&&(e.unshift(e[e.length-1]),e.push(e[1]));let n=e.length;if(n===0)return[];let r=[new k(e[0])];return this.P(r,t,0,n-1,e[1].v(e[0]),e[n-2].v(e[n-1])),this.B&&(r.shift(),r.pop()),r}P(t,e,n,r,s,o){let h=this.k;if(r-n==1){let v=h[n],u=h[r],p=v.p(u)/3;return void this.R(t,[v,v.g(s.l(p)),u.g(o.l(p)),u])}let a=this.j(n,r),l,d=Math.max(e,e*e),c=!0;for(let v=0;v<=4;v++){let u=this.q(n,r,a,s,o),p=this.A(n,r,u,a);if(p.error<e&&c)return void this.R(t,u);if(l=p.index,p.error>=d)break;c=this.F(n,r,a,u),d=p.error}let i=h[l-1].v(h[l+1]);this.P(t,e,n,l,s,i),this.P(t,e,l,r,i.u(),o)}R(t,e){t[t.length-1].G=e[1].v(e[0]),t.push(new k(e[3],e[2].v(e[3])))}q(t,e,n,r,s){let o=1e-12,h=Math.abs,a=this.k,l=a[t],d=a[e],c=[[0,0],[0,0]],i=[0,0];for(let g=0,b=e-t+1;g<b;g++){let M=n[g],L=1-M,$=3*M*L,j=L*L*L,S=$*L,D=$*M,q=M*M*M,P=r.l(S),C=s.l(D),G=a[t+g].v(l._(j+S)).v(d._(D+q));c[0][0]+=P.m(P),c[0][1]+=P.m(C),c[1][0]=c[0][1],c[1][1]+=C.m(C),i[0]+=P.m(G),i[1]+=C.m(G)}let v=c[0][0]*c[1][1]-c[1][0]*c[0][1],u,p;if(h(v)>o){let g=c[0][0]*i[1]-c[1][0]*i[0];u=(i[0]*c[1][1]-i[1]*c[0][1])/v,p=g/v}else{let g=c[0][0]+c[0][1],b=c[1][0]+c[1][1];u=p=h(g)>o?i[0]/g:h(b)>o?i[1]/b:0}let f=d.p(l),y=o*f,w,x;if(u<y||p<y)u=p=f/3;else{let g=d.v(l);w=r.l(u),x=s.l(p),w.m(g)-x.m(g)>f*f&&(u=p=f/3,w=x=null)}return[l,l.g(w||r.l(u)),d.g(x||s.l(p)),d]}F(t,e,n,r){for(let s=t;s<=e;s++)n[s-t]=this.H(r,this.k[s],n[s-t]);for(let s=1,o=n.length;s<o;s++)if(n[s]<=n[s-1])return!1;return!0}H(t,e,n){let r=[],s=[];for(let i=0;i<=2;i++)r[i]=t[i+1].v(t[i])._(3);for(let i=0;i<=1;i++)s[i]=r[i+1].v(r[i])._(2);let o=this.I(3,t,n),h=this.I(2,r,n),a=this.I(1,s,n),l=o.v(e),d=h.m(h)+l.m(a);return(c=d)>=-112e-18&&c<=112e-18?n:n-l.m(h)/d;var c}I(t,e,n){let r=e.slice();for(let s=1;s<=t;s++)for(let o=0;o<=t-s;o++)r[o]=r[o]._(1-n).g(r[o+1]._(n));return r[0]}j(t,e){let n=[0];for(let r=t+1;r<=e;r++)n[r-t]=n[r-t-1]+this.k[r].p(this.k[r-1]);for(let r=1,s=e-t;r<=s;r++)n[r]/=n[s];return n}A(t,e,n,r){let s=Math.floor((e-t+1)/2),o=0;for(let h=t+1;h<e;h++){let a=this.I(3,n,r[h-t]).v(this.k[h]),l=a.x*a.x+a.y*a.y;l>=o&&(o=l,s=h)}return{error:o,index:s}}},I=(m,t={})=>((e,n,r)=>{let s=e.length,o=new A(r),h,a,l,d,c=!0,i=[],v=(u,p)=>{let f=u.C.x,y=u.C.y;if(c)i.push("M"+o.o(f,y)),c=!1;else{let w=f+(u.L?.x??0),x=y+(u.L?.y??0);if(w===f&&x===y&&l===h&&d===a){if(!p){let g=f-h,b=y-a;i.push(g===0?"v"+o.h(b):b===0?"h"+o.h(g):"l"+o.o(g,b))}}else i.push("c"+o.o(l-h,d-a)+" "+o.o(w-h,x-a)+" "+o.o(f-h,y-a))}h=f,a=y,l=f+(u.G?.x??0),d=y+(u.G?.y??0)};if(!s)return"";for(let u=0;u<s;u++)v(e[u]);return n&&s>0&&(v(e[0],!0),i.push("z")),i.join("")})(new _(m.map(e=>new E(e[0],e[1])),t.closed).D(t.tolerance??2.5),t.closed,t.precision??5);var F=class{constructor(t,e){this.path=t;this.smoothingPointCount=e?.smoothingPointCount??4,this.distanceThreshold=e?.distanceThreshold??4,this.inertiaFactor=e?.inertiaFactor??.1,this.tolerance=e?.tolerance??2.5,this.precision=e?.precision??5;let n=10**this.precision;this.round=r=>Math.round(r*n)/n}smoothingPointCount;distanceThreshold;inertiaFactor;tolerance;precision;wma;points=[];round;get d(){return this.path.getAttribute("d")??""}set d(t){this.path.setAttribute("d",t)}add({x:t,y:e}){let{points:n,wma:r}=this;if(r){let[s,o]=this.wma=[(r[0]+t)*.5,(r[1]+e)*.5],[h,a]=n[n.length-1],l=Math.hypot(s-h,o-a);if(l>this.distanceThreshold){if(n.length>3){let[d,c]=n[n.length-3],[i,v]=n[n.length-2],u=Math.hypot(h-i,a-v)*this.inertiaFactor,p=u/Math.hypot(i-d,v-c),f=u/l;this.d+=`C${i+(i-d)*p} ${v+(v-c)*p} ${h+(h-s)*f} ${a+(a-o)*f} ${h} ${a}`}n.push([s,o])}}else this.d=`M${this.round(t)} ${this.round(e)}v0`,n.push(this.wma=[t,e]);return this}end(){let{path:t,points:e}=this;if(e.length>4){let n=t.getTotalLength(),r=[],s=Math.max(.2,Math.min(8,n*.01));for(let h=0;h<n;h+=s){let{x:a,y:l}=t.getPointAtLength(h);r.push([a,l])}let o=t.getPointAtLength(n);r.push([o.x,o.y]),this.d=I(r,{tolerance:this.tolerance,precision:this.precision})}else e.length>1&&(this.d=e.map(([n,r],s,o)=>s===0?`M${this.round(n)} ${this.round(r)}`:`l${this.round(n-o[s-1][0])} ${this.round(r-o[s-1][1])}`).join());return this}};var T=m=>m.target.closest("svg[data-fluentpath]"),R=+new URLSearchParams(location.search).get("inertia")||.15;addEventListener("pointerdown",m=>{if(m.button!==0)return;let t=T(m);if(!t)return;let e=t.getCTM().a*visualViewport.scale,n=t.getScreenCTM().inverse(),r=i=>new DOMPoint(i.clientX,i.clientY).matrixTransform(n),s=document.createElementNS("http://www.w3.org/2000/svg","path"),o=new F(s,{distanceThreshold:4/e,tolerance:1/e,precision:e>2?2:1,inertiaFactor:R}).add(r(m)),h=i=>o.add(r(i)),a=i=>{c(),o.add(r(i)).end(),s.dispatchEvent(new CustomEvent("fluentpath:drawend",{bubbles:!0}))},l=i=>i.keyCode===27&&d(),d=()=>{c(),s.remove()},c=()=>{removeEventListener("pointerdown",d,!0),removeEventListener("pointermove",h),removeEventListener("pointerup",a,!0),removeEventListener("pointercancel",d,!0),removeEventListener("keydown",l)};addEventListener("pointerdown",d,!0),addEventListener("pointermove",h),addEventListener("pointerup",a,!0),addEventListener("pointercancel",d,!0),addEventListener("keydown",l),t.appendChild(s).dispatchEvent(new CustomEvent("fluentpath:drawstart",{bubbles:!0})),m.preventDefault()},{passive:!1});"GestureEvent"in self&&(addEventListener("touchmove",m=>m.touches.length===1&&T(m)&&m.preventDefault(),{passive:!1}),addEventListener("touchend",m=>T(m)&&m.preventDefault(),{passive:!1}));})();
