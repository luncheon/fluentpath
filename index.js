(()=>{var _=class{constructor(t){this.t=t,this.i=10**this.t}h(t){return this.t<16?Math.round(t*this.i)/this.i:t}o(t,e){return this.h(t)+","+this.h(e)}},M=class{constructor(t,e){this.x=t,this.y=e}u(){return new M(-this.x,-this.y)}l(t=1){return this._(t/(this.M()||1/0))}g(t){return new M(this.x+t.x,this.y+t.y)}v(t){return new M(this.x-t.x,this.y-t.y)}_(t){return new M(this.x*t,this.y*t)}m(t){return this.x*t.x+this.y*t.y}M(){return Math.sqrt(this.x*this.x+this.y*this.y)}p(t){let e=this.x-t.x,s=this.y-t.y;return Math.sqrt(e*e+s*s)}},C=class{constructor(t,e){this.C=t,this.L=e}},I=class{constructor(t,e){this.k=t,this.B=e}D(t){let e=this.k;this.B&&(e.unshift(e[e.length-1]),e.push(e[1]));let s=e.length;if(s===0)return[];let n=[new C(e[0])];return this.P(n,t,0,s-1,e[1].v(e[0]),e[s-2].v(e[s-1])),this.B&&(n.shift(),n.pop()),n}P(t,e,s,n,r,o){let l=this.k;if(n-s==1){let g=l[s],h=l[n],f=g.p(h)/3;return void this.R(t,[g,g.g(r.l(f)),h.g(o.l(f)),h])}let a=this.j(s,n),u,v=Math.max(e,e*e),c=!0;for(let g=0;g<=4;g++){let h=this.q(s,n,a,r,o),f=this.A(s,n,h,a);if(f.error<e&&c)return void this.R(t,h);if(u=f.index,f.error>=v)break;c=this.F(s,n,a,h),v=f.error}let i=l[u-1].v(l[u+1]);this.P(t,e,s,u,r,i),this.P(t,e,u,n,i.u(),o)}R(t,e){t[t.length-1].G=e[1].v(e[0]),t.push(new C(e[3],e[2].v(e[3])))}q(t,e,s,n,r){let o=1e-12,l=Math.abs,a=this.k,u=a[t],v=a[e],c=[[0,0],[0,0]],i=[0,0];for(let p=0,w=e-t+1;p<w;p++){let L=s[p],b=1-L,D=3*L*b,F=b*b*b,A=D*b,G=D*L,$=L*L*L,P=n.l(A),k=r.l(G),T=a[t+p].v(u._(F+A)).v(v._(G+$));c[0][0]+=P.m(P),c[0][1]+=P.m(k),c[1][0]=c[0][1],c[1][1]+=k.m(k),i[0]+=P.m(T),i[1]+=k.m(T)}let g=c[0][0]*c[1][1]-c[1][0]*c[0][1],h,f;if(l(g)>o){let p=c[0][0]*i[1]-c[1][0]*i[0];h=(i[0]*c[1][1]-i[1]*c[0][1])/g,f=p/g}else{let p=c[0][0]+c[0][1],w=c[1][0]+c[1][1];h=f=l(p)>o?i[0]/p:l(w)>o?i[1]/w:0}let d=v.p(u),x=o*d,y,E;if(h<x||f<x)h=f=d/3;else{let p=v.v(u);y=n.l(h),E=r.l(f),y.m(p)-E.m(p)>d*d&&(h=f=d/3,y=E=null)}return[u,u.g(y||n.l(h)),v.g(E||r.l(f)),v]}F(t,e,s,n){for(let r=t;r<=e;r++)s[r-t]=this.H(n,this.k[r],s[r-t]);for(let r=1,o=s.length;r<o;r++)if(s[r]<=s[r-1])return!1;return!0}H(t,e,s){let n=[],r=[];for(let i=0;i<=2;i++)n[i]=t[i+1].v(t[i])._(3);for(let i=0;i<=1;i++)r[i]=n[i+1].v(n[i])._(2);let o=this.I(3,t,s),l=this.I(2,n,s),a=this.I(1,r,s),u=o.v(e),v=l.m(l)+u.m(a);return(c=v)>=-112e-18&&c<=112e-18?s:s-u.m(l)/v;var c}I(t,e,s){let n=e.slice();for(let r=1;r<=t;r++)for(let o=0;o<=t-r;o++)n[o]=n[o]._(1-s).g(n[o+1]._(s));return n[0]}j(t,e){let s=[0];for(let n=t+1;n<=e;n++)s[n-t]=s[n-t-1]+this.k[n].p(this.k[n-1]);for(let n=1,r=e-t;n<=r;n++)s[n]/=s[r];return s}A(t,e,s,n){let r=Math.floor((e-t+1)/2),o=0;for(let l=t+1;l<e;l++){let a=this.I(3,s,n[l-t]).v(this.k[l]),u=a.x*a.x+a.y*a.y;u>=o&&(o=u,r=l)}return{error:o,index:r}}},q=(m,t={})=>((e,s,n)=>{let r=e.length,o=new _(n),l,a,u,v,c=!0,i=[],g=(h,f)=>{let d=h.C.x,x=h.C.y;if(c)i.push("M"+o.o(d,x)),c=!1;else{let y=d+(h.L?.x??0),E=x+(h.L?.y??0);if(y===d&&E===x&&u===l&&v===a){if(!f){let p=d-l,w=x-a;i.push(p===0?"v"+o.h(w):w===0?"h"+o.h(p):"l"+o.o(p,w))}}else i.push("c"+o.o(u-l,v-a)+" "+o.o(y-l,E-a)+" "+o.o(d-l,x-a))}l=d,a=x,u=d+(h.G?.x??0),v=x+(h.G?.y??0)};if(!r)return"";for(let h=0;h<r;h++)g(e[h]);return s&&r>0&&(g(e[0],!0),i.push("z")),i.join("")})(new I(m.map(e=>new M(e[0],e[1])),t.closed).D(t.tolerance??2.5),t.closed,t.precision??5);var S=m=>m.target.closest("svg[data-fluentpath]");addEventListener("pointerdown",m=>{if(m.button!==0)return;let t=S(m);if(!t)return;let e=t.getCTM().a*visualViewport.scale,s=t.getScreenCTM().inverse(),n=d=>new DOMPoint(d.clientX,d.clientY).matrixTransform(s),r=n(m),o=[r],{x:l,y:a}=r,u=`M${l} ${a}`,v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d",u);let c=d=>{o.unshift(n(d)),o.length===5&&o.pop();let x=o.reduce((E,p)=>E+p.x,0)/o.length,y=o.reduce((E,p)=>E+p.y,0)/o.length;Math.hypot(l-x,a-y)>2&&v.setAttribute("d",u+=`L${(l=x).toFixed(2)} ${(a=y).toFixed(2)}`)},i=d=>{if(f(),c(d),u.includes("L")){let x=[],y=v.getTotalLength(),E=Math.max(.2,Math.min(8,y*.02));for(let p=0;p<=y;p+=E){let{x:w,y:L}=v.getPointAtLength(p);x.push([w,L])}u=q(x,{tolerance:.5/e,precision:e>2?1:0})}else u+="v0";v.setAttribute("d",u),v.dispatchEvent(new CustomEvent("fluentpath:drawend",{bubbles:!0}))},g=d=>d.keyCode===27&&h(),h=()=>{f(),v.remove()},f=()=>{removeEventListener("pointerdown",h,!0),removeEventListener("pointermove",c),removeEventListener("pointerup",i,!0),removeEventListener("pointercancel",h,!0),removeEventListener("keydown",g)};addEventListener("pointerdown",h,!0),addEventListener("pointermove",c),addEventListener("pointerup",i,!0),addEventListener("pointercancel",h,!0),addEventListener("keydown",g),t.appendChild(v),v.dispatchEvent(new CustomEvent("fluentpath:drawstart",{bubbles:!0}))});"GestureEvent"in self&&(addEventListener("touchmove",m=>m.touches.length===1&&S(m)&&m.preventDefault(),{passive:!1}),addEventListener("touchend",m=>S(m)&&m.preventDefault(),{passive:!1}));})();
